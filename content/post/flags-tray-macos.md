+++
Categories = ["desktop"]
Description = "Как вернуть флаги в MacOS 12.4 Monterey и 13.0 Ventura"
Tags = ["macos", "desktop"]
date = "2022-11-01T14:40:42+03:00"
title = "Возвращаем флаги раскладок клавиатуры в трей MacOS"
Banner = "/img/flags-macos-ventura.png"
+++

Начиная с MacOS 12.4 Monterey, в трее изменилась иконка отображения текущей раскладки клавиатуры. Раньше были флаги, а теперь буквенное обозначение раскладки. Это выглядит красиво и лаканично, но в реальной жизни приходится всматриваться, чтобы понять какая сейчас раскладка включена. ~~Раньше было лучше, эпол верни всё взад~~. Покажу маленький костыль как вернуть обратно флаги в трей. **Инструкция подойдет для MacOS начиная с версии 12.4, в том числе и для 13.0 Ventura**.

<!--more-->

Этот способ я подсмотрел на [iphones.ru](https://www.iphones.ru/iNotes/kak-vernut-flagi-dlya-yazykov-klaviatury-v-status-bare-macos-124-i-novee-05-18-2022), однако там иконки сделаны неаккуратно, поэтому я заменил иконки на те, что более похожи на родные МакОСёвые. И еще я добавил Британский флаг.

## Возвращаем флаги

1. Скачиваем [ru-keyboard-with-icon.bundle.zip](/files/ru-keyboard-with-icon.bundle.zip) и распаковываем.
2. Кладем ```ru-keyboard-with-icon.bundle``` файл в ```/Library/Keyboard Layouts```. Для этого в Finder нажимаем ```Сommand + Shift + G``` и переходим в нужный каталог.
3. Перезагружаемся 
4. В настройках Клавиатуры добавляем источники ввода "США (Флаг)"/"Британская (Флаг)" и "Русская (Флаг)". Я использую флаг США, у меня вот так выглядит:
![Настройки клавиатуры](/img/flags-macos.png)
До последней версии этого было достаточно, но в 13.0 Ventura **не удаляется дефолтная раскладка США**.
![Не удаляется раскладка США](/img/flags-macos-ventura1.png)
5. Чтобы удалить эту раскладку без флага, запустите Терминал и вставьте следующую команду:
{{< highlight console >}}
plutil -convert xml1 ~/Library/Preferences/com.apple.HIToolbox.plist && \
 open -a TextEdit ~/Library/Preferences/com.apple.HIToolbox.plist
{{< /highlight >}}
У вас откроется текстовый редактор в котором нужно удалить секцию с этой раскладкой. На скриншоте я выделил кусок, который нужно удалить.
![Удалите раскладку из конфига](/img/flags-macos-ventura2.png)
6. Сохраняем файл (⌘ S) и перезагружаемся.
7. Вы великолепны!

![Флаги снова с нами](/img/flags-macos-ventura3.png)